<!doctype html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <link rel="stylesheet" href="style/style.css">
  <title>Bloom's Favorite Arts</title>
</head>

<body class="bg-gray-900" style="overflow: hidden">

  <div class="flex gap-x-3 gap-y-2 m-4">

    <div id="charactersParent" class="flex items-center">

      <!-- LEFT SIDE -->
      <div id="characters"
        class="bg-slate-800 grid grid-row items-center justify-center rounded-full gap-3 min-h-[30vh] max-h-[30vh] w-20 overflow-y-auto">
        <!-- charas/tags -->
      </div>

    </div>


    <!-- MIDDLE -->
    <div class="max-h-[96vh] overflow-auto rounded-[10px] mx-auto">
      <div id="arts" class="lg:columns-5 md:columns-3 sm:columns-2 px-[25px] py-[20px] bg-slate-950 rounded">
        <!-- art pics -->
      </div>
    </div>

    <!-- RIGHT SIDE -->
    <div id="artistsParent" class="flex items-center">

      <div id="artists"
        class="bg-slate-800 flex flex-col items-center rounded-full min-h-[30vh] max-h-[30vh] w-20 overflow-y-auto ">
        <!-- artists here -->
      </div>

    </div>

  </div>

  <script src="/scripts/script.js"></script>
  <script>
    (async function () {
      const artDiv = document.getElementById("arts");
      const artistsParentDiv = document.getElementById("artistsParent");
      const artistsDiv = document.getElementById("artists");

      const charactersDiv = document.getElementById("characters");


      callJson = await fetchArt();

      allTwtArtist = Object.keys(callJson.twitter);


      console.log(`All artist = ${allTwtArtist.length}`);

      // counter for pfp, para ndi masama sa loop ng img
      async function display(artist, counter) {
        const arts = await getArtFrom(artist);
        const artImg = arts.image;
        const artUrl = arts.url;
        const artCharacter = arts.characters;
        const artistPfp = arts.pfp
        const artistProfile = arts.profile

        // for middle part (main gallery / pics / img)
        for (i = 0; i < artImg.length; i++) {
          let createLink = document.createElement("a");
          let createDiv = document.createElement("div");
          let createImg = document.createElement("img");

          createLink.setAttribute('href', artUrl[i]);
          createLink.setAttribute('target', "_blank");
          createLink.style.height = "max-content";
          createLink.style.width = "max-content";

          createImg.style.maxWidth = "230px";
          createImg.style.minWidth = "100px";
          createImg.classList.add("rounded-[10px]");

          createDiv.style.height = "max-content";
          createDiv.classList.add("break-inside-avoid");
          createDiv.classList.add("mb-4");
          createDiv.classList.add("hover");
          createDiv.style.width = "max-content";

          createImg.src = artImg[i];

          artDiv.appendChild(createDiv).appendChild(createLink).appendChild(createImg);

        }

        // for right-side (pfp/profile/artist)
        let createDiv_Artist = document.createElement("div");
        let createLink_Artist = document.createElement("a");
        let createImg_Artist = document.createElement("img");

        createDiv_Artist.classList.add("rounded-full");
        createDiv_Artist.classList.add("w-15");
        createDiv_Artist.classList.add("bg-white");
        createDiv_Artist.classList.add("mb-2");

        createLink_Artist.setAttribute("href", artistProfile[counter]);
        createLink_Artist.setAttribute("target", "_blank");

        createImg_Artist.classList.add("rounded-full");
        createImg_Artist.src = artistPfp[counter];
        createImg_Artist.alt = allTwtArtist[counter];
        createImg_Artist.title = allTwtArtist[counter];

        artistsDiv.appendChild(createDiv_Artist).appendChild(createLink_Artist).appendChild(createImg_Artist);
      }


      artistsParentDiv.style.transition = "all 0.5s ease";
      artistsDiv.style.transition = "min-height 0.5s ease, max-height 0.5s ease";

      artistsDiv.addEventListener("mouseenter", () => {
        artistsDiv.classList.remove("max-h-[30vh]");
        artistsDiv.classList.add("max-h-[96vh]");
      });

      artistsDiv.addEventListener("mouseleave", () => {
        artistsDiv.classList.remove("max-h-[96vh]");
        artistsDiv.classList.add("max-h-[30vh]");
      });


      for (i = 0; i < allTwtArtist.length; i++) {
        display(allTwtArtist[i], i);
      }


    })();
  </script>

</body>

</html